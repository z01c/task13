(function(a){a.fn.jtwt=function(b){var c={username:"harbor",query:"",count:4,image_size:48,convert_links:!0,loader_text:"loading new tweets",no_result:"No recent tweets found"},b=a.extend(c,b),d=function(a){var b=new Date(a.replace(/^\w+ (\w+) (\d+) ([\d:]+) \+0000 (\d+)$/,"$1 $2 $4 $3 UTC")),c=new Date,d=Math.floor((c-b)/1e3);return 1>=d?"just now":20>d?d+" seconds ago":40>d?"half a minute ago":60>d?"less than a minute ago":90>=d?"one minute ago":3540>=d?Math.round(d/60)+" minutes ago":5400>=d?"1 hour ago":86400>=d?Math.round(d/3600)+" hours ago":129600>=d?"1 day ago":604800>d?Math.round(d/86400)+" days ago":777600>=d?"1 week ago":"on "+b};return this.each(function(){var f,c=b,e=a(this);a(e).append('<ul class="jtwt"></ul>'),a(".jtwt",e).append('<li class="jtwt_loader jtwt_tweet" style="display:none;">'+c.loader_text+"</li>"),a(".jtwt_loader",e).fadeIn("slow"),f=c.query?encodeURIComponent(c.query):"from:"+encodeURIComponent(c.username),a.getJSON("http://search.twitter.com/search.json?q="+f+"&callback=?",function(b){var f=b.results;if(f.length)for(var g=0;c.count>g&&f.length>g;g++){var h=f[g];jtweet='<li class="jtwt_tweet">',c.image_size&&(today=new Date,jtweet+='<div class="jtwt_picture">',jtweet+='<a href="http://twitter.com/'+h.from_user+'">',jtweet+='<img width="'+c.image_size+'" height="'+c.image_size+'" src="'+h.profile_image_url+'" />',jtweet+="</a>",jtweet+="</div>");var i=h.text,j=d(h.created_at);c.convert_links&&(i=i.replace(/(http\:\/\/[A-Za-z0-9\/\.\?\=\-]*)/g,'<a href="$1">$1</a>'),i=i.replace(/@([A-Za-z0-9\/_]*)/g,'<a href="http://twitter.com/$1">@$1</a>'),i=i.replace(/#([A-Za-z0-9\/\.]*)/g,'<a href="http://twitter.com/search?q=$1">#$1</a>')),jtweet+='<p class="jtwt_tweet_text">'+i+"</p>",jtweet+='<a href="http://twitter.com/'+h.from_user+"/statuses/"+h.id_str+'" class="jtwt_date">'+j+"</a>",jtweet+="</li>",a(".jtwt",e).append(jtweet)}else a(".jtwt_loader",e).fadeOut("fast",function(){a(".jtwt",e).append('<li class="jtwt_noresult jtwt_tweet" style="display:none;">'+c.no_result+"</li>"),a(".jtwt_noresult",e).fadeIn("slow")});a(".jtwt_loader",e).fadeOut("fast")})})}})(jQuery);